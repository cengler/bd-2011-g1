\documentclass[a4paper, 10pt, notitlepage]{article}

\usepackage{moreverb} %para importar codigo

\usepackage{pepotina} %paquete personal para la caratula del DC

\usepackage[spanish,activeacute]{babel}
\usepackage{babel} %paquete de idioma

\usepackage[latin1]{inputenc}

\usepackage[normalem]{ulem}
\usepackage{ulem}

%\usepackage{color}

\usepackage{hyperref}
%\usepackage[all]{hypcap}

\usepackage{caeycaeBD}

\usepackage{fancyhdr} %linea sup con comentarios

\usepackage{lscape} %para hoja apaisada

\usepackage{framed} %para crear cajas de texto

\usepackage{lastpage} %ultima pagina

%\usepackage{pstricks}
%\usepackage{uml} %UML

\usepackage{listings}
%\lstset{
%  breaklines=true,                                     % line wrapping on
%  language=ocl,
%  frame=ltrb,
%  framesep=5pt,
%  basicstyle=\normalsize,
%  keywordstyle=\ttfamily\color{OliveGreen},
%  identifierstyle=\ttfamily\color{CadetBlue}\bfseries,
%  commentstyle=\color{Brown},
%  stringstyle=\ttfamily,
%  showstringspaces=ture
%}

\addtolength{\topmargin}{-50pt} 
\addtolength{\textwidth}{145pt}
\addtolength{\textheight}{120pt}
\addtolength{\oddsidemargin}{-70pt}

%\newcommand{\minix}{\textsl{minix }}

%%% Encabezado y pie de p'agina
\pagestyle{fancy}
\fancyhead[LO]{Base de Datos}
\fancyhead[C]{}
\fancyhead[RO]{P\'agina \thepage\ de \pageref{LastPage}}
\renewcommand{\headrulewidth}{0.4pt}
\fancyfoot{}

\newcommand{\FALTA}{{\bf FALTA FALTA FALTA FALTA FALTA FALTA FALTA FALTA }}

\begin{document}

\universidad{Universidad de Buenos Aires}
\facultad{Facultad de ciencias exactas y naturales}
\departamento{Departamento de Computacion}
\materia{Base de Datos}
\resumen{Tp1}
\keys{MER, MR}
\titulo{Tp1}
\subtitulo{Tp 1: Empresa de Transportes}
\grupo{Numero de grupo: 1}
\fecha{2do Cuatrimeste 2011}
\footspace{1cm}
\integrante{Piotrkowski, Kevin}{204/06}{marcoskevin@gmail.com}
\integrante{Rugnone, Martin}{666/04 -- MAL}{mrugnone@hotmail.com}
\integrante{Alvarez, Maria de los Angeles}{264/05}{mdelosaalvarez@hotmail.com}
\integrante{Engler, Christian}{314/05}{caeycae@gmail.com}

\maketitle{}

\tableofcontents

\newpage

\section{MR}

\begin{mr}{Agencia de Viajes}

\entidad{Licencia}{\pk{nroLicencia}, fechaObtencion, fechaVencimiento, observaciones}
\entidadPK{nroLicencia}
\entidadCK{nroLicencia}

\entidad{Chofer}{\pk{nroDocumento}, fechaNac, nomApe, domicilio, telefono, \fk{nroLicencia}}
\entidadPK{nroDocumento}
\entidadCK{nroDocumento}
\entidadFK{nroLicencia}

\entidad{Conduce}{\pfk{nroDocumento}, \pfk{codViaje}}
\entidadPK{nroDocumento, codViaje}
\entidadCK{nroDocumento, codViaje}
\entidadFK{nroDocumento, codViaje}

\entidad{Control}{\pk{idControl}, \pfk{nroDocumento}, \pfk{codViaje}, \fk{codTest}, resultadoTest, fechaControl}
\entidadPK{idControl, (nroDocumento, codViaje)}
\entidadCK{idControl, (nroDocumento, codViaje)}
\entidadFK{nroDocumento, codViaje, codTest}

\entidad{Test}{\pk{codTest}, descripcion}
\entidadPK{codTest}
\entidadCK{codTest}

\entidad{Contingencia}{\pk{codContingencia}, \pfk{codViaje}, descripcion}
\entidadPK{codContingencia, codViaje}
\entidadCK{codContingencia, codViaje}
\entidadFK{codViaje}

\entidad{Direccion}{\pk{codDir}, nombre, altura, \fk{codCiudad}}
\entidadPK{codDir}
\entidadCK{codDir}
\entidadFK{codCiudad}

\entidad{Ciudad}{\pk{codCiudad}, nombre}
\entidadPK{codCiudad}
\entidadCK{codCiudad}

\entidad{Ruta}{\pk{codRuta}, cantKm, condicionesCamino, cantPeajes, tiempoEstimado}
\entidadPK{codRuta}
\entidadCK{codRuta}

\entidad{Vehiculo}{\pk{nroPatente}, modelo, marca, capacidad, enUsoDesde, estado, fechaIngreso}
\entidadPK{nroPatente}
\entidadCK{nroPatente}


\entidad{Viaje}{\pk{codViaje}, fechaHoraPartida, fechaHoraLlegadaEst, \fk{nroPatente}, \fk{codOrigen}, \fk{codDestino}, realizado}
\entidadPK{codViaje}
\entidadCK{codViaje}
\entidadFK{nroPatente,codOrigen.codDestino}

\entidad{ViajeRealizado}{\pk{codViaje}, fechaHoraLlegada, \fk{codRuta}}
\entidadPK{codViaje}
\entidadCK{codViaje}
\entidadFK{codViaje, codRuta}

\entidad{Emplea}{\pfk{codViaje}, \pfk{codRuta}}
\entidadPK{(codViaje, codRuta)}
\entidadCK{(codViaje, codRuta)}
\entidadFK{codViaje, codRuta}

\begin{enumerate}
\item $\forall v \in Vehiculo, v.enUso=true \Rightarrow v.fechaIngreso = NULL$
\item $\forall v \in Vehiculo, v.enUso=false \Rightarrow v.fechaIngreso \neq NULL$
\end{enumerate}

\end{mr}

\begin{verbatim}
(paraTodo v pertenece Viaje)
	1 <= #(v.conduce) <= 3
	v.fechaHoraLlegadaEst > v.fechaHoraPartida

(paraTodo v pertenece ViajePlanificado)
	v.realiza es de tipo vehículoEnUso

(paraTodo v pertenece ViajeRealizado)
	v.fechaHoraLlegada > v.fechaHoraPartida
	

\end{verbatim}	


\end{document}
